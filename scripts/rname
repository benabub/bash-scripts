#!/bin/bash

# rename all tree (regular files & directories): lowercase + whitespaces -> '-'
# no options and arg

#######################

# first task: rename all subdirs in right order (from depth to cwd)
# either it will cause "dir not exist" errors

DIRS_ALL="$(find . -depth -wholename "./*" -type d | xargs -d \n)"

set -f
IFS=$'\n'

DIRS=($DIRS_ALL) # make array of all subdirs related paths

for i in "${DIRS[@]}"
do
	rename -d ' s/([a-z])([A-Z])/$1-$2/g; s/ /-/g; s/_/-/g; y/A-Z/a-z/ ' "${i}"
done

set +f
unset IFS

#######################

# second task: rename all regular files in a tree

find . -type f | rename ' s/([a-z])([A-Z])/$1-$2/g; s/ /-/g; s/_/-/g; y/A-Z/a-z/ '

