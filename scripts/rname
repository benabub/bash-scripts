#!/bin/bash

# rename all tree (regular files & directories): lowercase + whitespaces -> '-'
# no options and arg

#######################

# rename all subdirs in right order (from depth to cwd)
# either it will cause "dir not exist" errors

find . -depth -wholename "./*" -type d ! -name '.*' ! -name '~*' -print0 |
	xargs -0 -I {} echo {} |
	rename -d ' s/([a-z])([A-Z])/$1-$2/g; s/ /-/g; s/_/-/g; y/A-Z/a-z/ '

# rename all regular files in a tree

find . ! -name "." -type d \( -iname '.*' -o -iname '~*' \) -prune -o -type f ! -iname ".*" ! -iname "~*" -print0 |
	xargs -0 -I {} echo {} |
	rename -d ' s/([a-z])([A-Z])/$1-$2/g; s/ /-/g; s/_/-/g; y/A-Z/a-z/ '

